box: flaviut/python-ruby@0.0.3
build:
    steps:
        - script:
            name: install nanoc and dependencies
            code: sudo gem install nanoc kramdown nokogiri
        - script:
            name: install pygments
            code: sudo pip install pygments
        - script:
            name: build and deploy
            code: |
              git config remote.origin.url $GIT_CREDENTIALS
              git config --global user.email $GIT_EMAIL
              git config --global user.name $GIT_NAME
              git checkout gh-pages
              git reset --hard master
              nanoc
              cp -r ./output/. ./
              git add --all .
              git commit -am'Build Site'
              git push --force
